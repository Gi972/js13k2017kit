<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Game Zero ES6</title><style>
body{margin:0;overflow:hidden;background:#111;color:#ccc}#canvas{position:fixed;top:50%;bottom:0;left:50%;right:0;width:100vmin;height:100vmin;transform:translate(-50%,-25%);image-rendering:optimizeSpeed;image-rendering:-moz-crisp-edges;image-rendering:-webkit-optimize-contrast;image-rendering:-o-crisp-edges;image-rendering:pixelated;-ms-interpolation-mode:nearest-neighbor;cursor:none;margin:auto}
</style></head><body><canvas id="canvas"></canvas><script>
var GAME=function(){function e(e,t,n){t|=0,(e|=0)>-1&&e<256&&t>-1&&t<256&&(f[renderTarget+(256*t+e)]=n)}function n(t,n,i,a,s){var r,o,l=(a|=0)-(n|=0),c=(i|=0)-(t|=0);if(l<0?(l=-l,o=-1):o=1,c<0?(c=-c,r=-1):r=1,l<<=1,c<<=1,e(t,n,s),c>l)for(var y=l-(c>>1);t!=i;)y>=0&&(n+=o,y-=c),y+=l,e(t+=r,n,s);else for(y=c-(l>>1);n!=a;)y>=0&&(t+=r,y-=l),y+=c,e(t,n+=o,s)}function i(t,n,i,a){var s=-i,r=0,o=2-2*i;do{e(t-s,n+r,a),e(t-r,n-s,a),e(t+s,n-r,a),e(t+r,n+s,a),(i=o)<=r&&(o+=2*++r+1),(i>s||o>r)&&(o+=2*++s+1)}while(s<0)}function a(e,t,i,a){e|=0,t|=0,a|=0;var s=-(i|=0),r=0,o=2-2*i;do{n(e-s,t-r,e+s,t-r,a),n(e-s,t+r,e+s,t+r,a),(i=o)<=r&&(o+=2*++r+1),(i>s||o>r)&&(o+=2*++s+1)}while(s<0)}function s(e,t,i,a,s){x1=0|e,y1=0|t,x2=e+i|0,y2=t+a|0;var r=Math.abs(y2-y1);if(n(x1,y1,x2,y1,s),r>0)for(;--r;)n(x1,y1+r,x2,y1+r,s);n(x1,y2,x2,y2,s)}function r(){for(var e=65536;e--;)d[e]=colors[pal[f[e]]];h.data.set(u),ctx.putImageData(h,0,0)}function o(){this.inUse=!1,this.init=function(){this.x=-500,this.y=-500,this.dead=!0,this.xvel=0,this.yvel=1,this.life=1},o.prototype.spawn=function(e){this.x=e.x,this.y=e.y,this.xvel=e.xvel,this.yvel=e.yvel,this.inUse=!0,this.life=e.life||1,this.remaining=e.life||1,this.radius=e.radius||1,this.color=e.color||21,this.dead=!1},o.prototype.use=function(e){return!!this.dead||(this.remaining-=e,this.x+=e*this.xvel,this.y+=e*this.yvel,this.draw(),this.remaining<=0?(this.dead=!0,!0):(this.y<0&&(this.dead=!0),!1))},o.prototype.clear=function(){this.x=-500,this.y=-500,this.dead=!0,this.xvel=0,this.yvel=0,this.life=1,this.inUse=!1},o.prototype.draw=function(){i(this.x,this.y,0|4*Math.random(),21)}}function l(e,t){var n=e,i=[];this.init=function(){for(var e=0;e<n;e++){var a=new t;a.init(),i[e]=a}},this.get=function(e){if(!i[n-1].inUse)return i[n-1].spawn(e),i.unshift(i.pop()),i[n-1]},this.getPool=function(){return i},this.use=function(){for(var e=0;e<n&&i[e].inUse;e++)i[e].use(dt)&&(i[e].clear(),i.push(i.splice(e,1)[0]))}}var c={};assets={song:{songData:[{i:[1,192,128,0,1,191,116,9,0,0,6,22,34,0,0,0,69,3,1,1,23,167,0,32,77,6,25,6],p:[1],c:[{n:[159],f:[]}]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]}],rowLen:5513,patternLen:1,endPattern:2},songdemo:{songData:[{i:[2,159,128,0,3,201,128,4,0,0,0,21,33,0,0,2,232,3,1,3,50,210,149,244,156,6,123,6],p:[1,1,1,1,4,4,2,3,1,1,2,3,4,4,2,3,1,1,2,3,4,4,4,4,4,4,5,4,5,1,5,4,4,2,3,6],c:[{n:[120,120,132,120,132,120,130,132,120,120,132,120,132,120,130,132,120,120,132,120,132,120,130,132,120,120,132,120,132,120,130,132],f:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,33]},{n:[118,118,130,118,130,118,128,130,118,118,130,118,130,118,128,130,118,118,130,118,130,118,128,130,118,118,130,118,130,118,128,130],f:[]},{n:[113,113,125,113,125,113,123,125,113,113,125,113,125,113,123,125,113,113,125,113,125,113,123,125,113,113,125,113,125,113,123,125],f:[]},{n:[120,120,132,120,132,120,130,132,120,120,132,120,132,120,130,132,120,120,132,120,132,120,130,132,120,120,132,120,132,120,130,132],f:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,43]},{n:[118,118,130,118,130,118,128,130,118,118,130,118,130,118,128,130,113,113,125,113,125,113,123,125,113,113,125,113,125,113,123,125],f:[]},{n:[120,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,127],f:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,115]}]},{i:[0,128,106,1,0,127,106,12,1,16,0,0,191,0,0,0,0,0,0,2,24,169,5,71,83,5,0,0],p:[,,,,1,1,1,1,1,1,1,1,1,1,1,1,,,,,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2],c:[{n:[135,,,135,,,135,,135,,,135,,,135,,135,,,135,,,135,,135,,,135,,,135],f:[13,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,138,56]},{n:[135],f:[13,,,,,,,,,,,13,,,,,,,,,,,,,,,,,,,,,164,,,,,,,,,,,191]}]},{i:[0,107,128,0,0,7,128,0,1,0,109,27,208,0,0,3,236,9,1,2,135,0,0,11,147,6,152,3],p:[,,2,,,2,,,,,3,,,2,,,1,2,3,4,,,2,,,2,,1,5,1,5],c:[{n:[156,,168],f:[]},{n:[156,,163],f:[]},{n:[154,,166],f:[]},{n:[149,,161],f:[]},{n:[154,,166,,,,,,,,,,,,,,149,,161],f:[]}]},{i:[0,0,140,0,0,0,140,0,0,255,242,0,0,0,0,2,255,3,1,2,77,231,0,32,243,3,157,2],p:[,,,1,,,,1,,,,1,,,,1,,,,1,,,,1,,,1,,,,1,,,,1],c:[{n:[147],f:[]}]},{i:[3,0,128,0,0,0,128,3,0,255,0,0,142,0,0,0,0,0,0,2,21,226,104,255,105,4,105,4],p:[,,,,2,,,,,,,,3,1,1,1,,,,,,,,,1,1,1,1,1,1,1,1,1,1,1,2],c:[{n:[,,,,147,,,,,,,,147,,,,,,,,147,,,,,,,,147],f:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,65]},{n:[147],f:[13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,142]},{n:[147,,,,,,,,,,,,147,,,,,,,,147,,,,,,,,147],f:[13,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,142,65]}]},{i:[0,192,104,0,0,192,116,4,0,0,5,17,56,0,0,0,69,5,1,3,82,181,13,187,148,5,128,8],p:[,,,,,,,,1,1,2,3,1,1,2,3,1,1,2,3,,,1,1,,,,1,4,1,4],c:[{n:[144,,,144,,144,142,156,,,,,,,,,144,,,144,,144,142,156],f:[]},{n:[142,,,142,,142,140,154,,,,,,,,,142,,,142,,142,140,154],f:[]},{n:[149,,,149,,149,147,161,,,,,,,,,149,,,149,,149,147,161],f:[]},{n:[142,,,142,,142,140,154,,,,,,,,,149,,,149,,149,147,161],f:[]}]},{i:[0,131,116,0,0,117,140,2,0,0,120,6,47,0,0,0,39,8,0,2,255,0,18,35,75,5,108,2],p:[,,,,,,,,,,,,,,,,,,,,,,,,1,2,1,2,3,2,3,2],c:[{n:[151,149,147,144,,,,,,,144,,147,151,,149,,,,,,,,,149,151,154,149,151,154,151,154],f:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,19]},{n:[156],f:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,120]},{n:[151,149,151,154,,,,,,,156,,154,151,,149,,,,,,,,,149,151,154,149,151,154,151,154],f:[11,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,19]}]},{i:[3,100,128,0,3,201,128,3,0,0,135,0,100,0,0,0,81,6,1,3,111,165,5,19,147,5,162,3],p:[,,,,,,,,,,,,,,,,,,,,1,2,1,2,1,2,3,2,3,2,3,2],c:[{n:[159,156,,,,,,,,,,,,,,,161,156],f:[]},{n:[163,156,,,,,,,,,,,,,,,163,156],f:[]},{n:[159,154,,,,,,,,,,,,,,,161,156],f:[]}]}],rowLen:7350,patternLen:32,endPattern:37},letters:{"-":[[,,,,0],[,,,,0],[1,1,1,1,1],[,,,,0],[,,,,0]],".":[[,,,,0],[,,,,0],[,,,,0],[,,,,0],[,,1,,0]],1:[[,1,1,,0],[,,1,,0],[,,1,,0],[,,1,,0],[1,1,1,1,1]],2:[[1,1,1,1,0],[,,,,1],[,1,1,1,0],[1,,,,0],[1,1,1,1,1]],3:[[1,1,1,1,0],[,,,,1],[,1,1,1,1],[,,,,1],[1,1,1,1,0]],4:[[1,,,1,0],[1,,,1,0],[1,1,1,1,1],[,,,1,0],[,,,1,0]],5:[[1,1,1,1,1],[1,,,,0],[1,1,1,1,0],[,,,,1],[1,1,1,1,0]],6:[[,1,1,1,0],[1,,,,0],[1,1,1,1,0],[1,,,,1],[,1,1,1,0]],7:[[1,1,1,1,1],[,,,,1],[,,,1,0],[,,1,,0],[,,1,,0]],8:[[,1,1,1,0],[1,,,,1],[,1,1,1,0],[1,,,,1],[,1,1,1,0]],9:[[,1,1,1,0],[1,,,,1],[,1,1,1,1],[,,,,1],[,1,1,1,0]],0:[[,1,1,1,0],[1,,,,1],[1,,,,1],[1,,,,1],[,1,1,1,0]],A:[[1,1,1,1,1],[1,,,,1],[1,1,1,1,1],[1,,,,1],[1,,,,1]],B:[[1,1,1,1,0],[1,,,1,0],[1,1,1,1,1],[1,,,,1],[1,1,1,1,1]],C:[[1,1,1,1,1],[1,,,,0],[1,,,,0],[1,,,,0],[1,1,1,1,1]],D:[[1,1,1,,0],[1,,,1,0],[1,,,,1],[1,,,,1],[1,1,1,1,1]],E:[[1,1,1,1,1],[1,,,,0],[1,1,1,,0],[1,,,,0],[1,1,1,1,1]],F:[[1,1,1,1,1],[1,,,,0],[1,1,1,,0],[1,,,,0],[1,,,,0]],G:[[1,1,1,1,1],[1,,,,0],[1,,1,1,1],[1,,,,1],[1,1,1,1,1]],H:[[1,,,,1],[1,,,,1],[1,1,1,1,1],[1,,,,1],[1,,,,1]],I:[[1,1,1,1,1],[,,1,,0],[,,1,,0],[,,1,,0],[1,1,1,1,1]],J:[[,,,,1],[,,,,1],[,,,,1],[1,,,,1],[1,1,1,1,1]],K:[[1,,,1,0],[1,,1,,0],[1,1,1,,0],[1,,,1,0],[1,,,,1]],L:[[1,,,,0],[1,,,,0],[1,,,,0],[1,,,,0],[1,1,1,1,1]],M:[[1,,,,1],[1,1,,1,1],[1,,1,,1],[1,,,,1],[1,,,,1]],N:[[1,,,,1],[1,1,,,1],[1,,1,,1],[1,,,1,1],[1,,,,1]],O:[[1,1,1,1,1],[1,,,,1],[1,,,,1],[1,,,,1],[1,1,1,1,1]],P:[[1,1,1,1,1],[1,,,,1],[1,1,1,1,1],[1,,,,0],[1,,,,0]],Q:[[1,1,1,1,0],[1,,,1,0],[1,,,1,0],[1,,,1,0],[1,1,1,1,1]],R:[[1,1,1,1,1],[1,,,,1],[1,1,1,1,1],[1,,,1,0],[1,,,,1]],S:[[1,1,1,1,1],[1,,,,0],[1,1,1,1,1],[,,,,1],[1,1,1,1,1]],T:[[1,1,1,1,1],[,,1,,0],[,,1,,0],[,,1,,0],[,,1,,0]],U:[[1,,,,1],[1,,,,1],[1,,,,1],[1,,,,1],[1,1,1,1,1]],V:[[1,,,,1],[1,,,,1],[1,,,,1],[,1,,1,0],[,,1,,0]],W:[[1,,,,1],[1,,,,1],[1,,1,,1],[1,1,,1,1],[1,,,,1]],X:[[1,,,,1],[,1,,1,0],[,,1,,0],[,1,,1,0],[1,,,,1]],Y:[[1,,,,1],[1,,,,1],[1,1,1,1,1],[,,1,,0],[,,1,,0]],Z:[[1,1,1,1,1],[,,,1,0],[,,1,,0],[,1,,,0],[1,1,1,1,1]]," ":[[,,,,0],[,,,,0],[,,,,0],[,,,,0],[,,,,0]],",":[[,,,,0],[,,,,0],[,,,,0],[,,1,,0],[,,1,,0]],"+":[[,,,,0],[,,1,,0],[,1,1,1,0],[,,1,,0],[,,,,0]],"/":[[,,,,1],[,,,1,0],[,,1,,0],[,1,,,0],[1,,,,0]],":":[[,,,,0],[,,1,,0],[,,,,0],[,,1,,0],[,,,,0]],"@":[[1,1,1,1,1],[,,,,1],[1,1,1,,1],[1,,1,,1],[1,1,1,1,1]]}};var y=document.getElementById("canvas");ctx=y.getContext("2d"),renderTarget=0,renderSource=65536,colors=[4278190080,4281606178,4282132549,4281416038,4282078863,4280709599,4284915929,4288332782,4281791227,4283491737,4281384554,4285436983,4281297227,4280568658,4281941042,4285808447,4286734384,4292963931,4294941539,4293184863,4294761419,4294967295,4290227611,4287069828,4285164137,4283586137,4287251062,4281479852,4284700633,4290411479,4283078543,4281364362],palDefault=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],pal=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],ctx.imageSmoothingEnabled=!1,ctx.mozImageSmoothingEnabled=!1,y.width=y.height=256;var h=ctx.getImageData(0,0,256,256),p=new ArrayBuffer(h.data.length),u=new Uint8Array(p),d=new Uint32Array(p),f=new Uint8ClampedArray(524288);playSound=function(e,t,n,i){var a=audioCtx.createBufferSource(),s=audioCtx.createGain(),r=audioCtx.createStereoPanner();return a.buffer=e,a.connect(r),r.connect(s),s.connect(audioCtx.destination),a.playbackRate.value=t,a.loop=i,s.gain.value=1,r.pan.value=n,a.start(),{volume:s,sound:a}};Key={_pressed:{},_released:{},LEFT:37,UP:38,RIGHT:39,DOWN:40,SPACE:32,a:65,w:87,s:83,d:68,z:90,x:88,f:70,p:80,r:82,isDown(e){return this._pressed[e]},justReleased(e){return this._released[e]},onKeydown(e){this._pressed[e.keyCode]=!0},onKeyup(e){this._released[e.keyCode]=!0,delete this._pressed[e.keyCode]},update(){this._released={}}},Txt={textLine(t){for(var n=t.text.length,i=0;i<n;i++)for(var a=assets.letters[t.text.charAt(i)]||assets.letters.unknown,r=0;r<5;r++)for(var o=0;o<5;o++)1===a[r][o]&&(1===t.scale?e(t.x+o*t.scale+(5*t.scale+t.hspacing)*i,t.y+r*t.scale,t.color):s(t.x+o*t.scale+(5*t.scale+t.hspacing)*i,t.y+r*t.scale,t.scale,t.scale,t.color))},text(e){var t=5*e.scale,n=e.text.split("\n"),i=n.slice(0),a=n.length,s=i.sort(function(e,t){return t.length-e.length})[0],r=s.length*t+(s.length-1)*e.hspacing,o=a*t+(a-1)*e.vspacing;e.halign||(e.halign="left"),e.valign||(e.valign="bottom");var l=e.x,c=e.y,y=e.x+r,h=e.y+o;"center"==e.halign?(l=e.x-r/2,y=e.x+r/2):"right"==e.halign&&(l=e.x-r,y=e.x),"center"==e.valign?(c=e.y-o/2,h=e.y+o/2):"bottom"==e.valign&&(c=e.y-o,h=e.y);var p=l+r/2,u=c+o/2;if(e.render)for(var d=0;d<a;d++){var f=n[d],g=f.length*t+(f.length-1)*e.hspacing,x=e.x,v=e.y+(t+e.vspacing)*d;"center"==e.halign?x=e.x-g/2:"right"==e.halign&&(x=e.x-g),"center"==e.valign?v-=o/2:"bottom"==e.valign&&(v-=o),e.snap&&(x=Math.floor(x),v=Math.floor(v)),this.textLine({ctx:e.ctx,x:x,y:v,text:f,hspacing:e.hspacing||0,scale:e.scale||1,color:e.color})}return{sx:l,sy:c,cx:p,cy:u,ex:y,ey:h,width:r,height:o}}},c.gameover={step:function(e){Key.isDown(Key.r)&&(state="menu")},render:function(e){s(0,0,256,256,0),s(0,0,64,64,2),Txt.text({x:128,y:40+15*Math.sin(2.5*t),text:"GAME\nOVER",hspacing:8+4*Math.cos(2.9*t),vspacing:15+5*Math.sin(3.5*t),halign:"center",valign:"top",scale:10,snap:1,render:1,color:21})}},c.menu={step:function(e){Key.isDown(Key.p)&&(state="game")},render:function(e){s(0,0,256,256,0),s(0,0,64,64,2),Txt.text({x:128,y:40+15*Math.sin(2.5*t),text:"MENU",hspacing:8+4*Math.cos(2.9*t),vspacing:15+5*Math.sin(3.5*t),halign:"center",valign:"top",scale:10,snap:1,render:1,color:21})}},c.game={step(e){player.update(e),Key.justReleased(Key.z)&&(songTrigger=!0),songTrigger&&(songTrigger=!1),bulletPool.use(),Key.update()},render(e){renderTarget=0;for(let e=0;e<65536;e++){let n=100*Math.random()|0;f[e+n]=0|(31*Math.sin(t)+31)%31}}},player={bullet:{x:0,y:0,xvel:0,yvel:0},init(){this.x=64,this.y=230,this.radius=12,this.xvel=0,this.yvel=0,this.xspeed=400,this.yspeed=400,this.drag=.6},update(e){this.bullet.x=player.x,this.bullet.y=player.y,this.xvel*=player.drag,this.yvel*=player.drag;let t=e*player.xvel,n=e*player.yvel;player.x+=t,player.y+=n,(Key.isDown(Key.d)||Key.isDown(Key.RIGHT))&&(player.xvel=player.xspeed),(Key.isDown(Key.a)||Key.isDown(Key.LEFT))&&(player.xvel=-player.xspeed),(Key.isDown(Key.w)||Key.isDown(Key.UP))&&(player.yvel=-player.yspeed),(Key.isDown(Key.s)||Key.isDown(Key.DOWN))&&(player.yvel=player.yspeed),Key.isDown(Key.SPACE||Key.isDown(Key.z))&&(player.bullet.yvel=-350,bulletPool.get(player.bullet)),player.x>256&&(player.x=0),player.x<0&&(player.x=256),player.y>256&&(player.y=0),player.y<0&&(state="gameover",player.y=256)},draw(e){a(this.x,this.y,this.radius,21)}},init=function(){last=0,dt=0,now=0,t=0,moveX=0,speedFactor=.6,songTrigger=!1,state="menu",bulletPool=new l(100,o),sounds={},starColors=[15,16,17,18,19,20,21],bulletPool.init(),player.init(),soundInit(),eventInit(),loop()},stopCapture=(e=>{}),loop=(()=>{let e=(new Date).getTime();dt=Math.min(1,(e-last)/1e3);t+=dt;c[state].render();c[state].step(dt);last=e;r();requestAnimationFrame(loop)}),soundInit=(()=>{sounds={}}),eventInit=(()=>{window.addEventListener("keyup",function(e){Key.onKeyup(e)},!1);window.addEventListener("mousedown",function(e){stopCapture(e)},!1);window.addEventListener("keydown",function(e){Key.onKeydown(e)},!1);window.addEventListener("blur",function(e){paused=!0},!1);window.addEventListener("focus",function(e){paused=!1},!1)}),window.onload=init()}();
</script></body></html>